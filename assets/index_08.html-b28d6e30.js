import{_ as n,p as s,q as a,Y as t}from"./framework-aa5c4115.js";const o={},p=t(`<ul><li>vue-router 提供的路由(导航)守卫主要⽤来通过跳转或取消的⽅式守卫导航。</li><li>有很多种⽅式植⼊路由导航中：全局的，单个路由独享的，或者组件级的。</li></ul><h3 id="全局导航钩子" tabindex="-1"><a class="header-anchor" href="#全局导航钩子" aria-hidden="true">#</a> 全局导航钩⼦：</h3><ol><li>router.beforeEach(to,from,next)</li><li>router.afterEach(to,from)</li><li>...</li></ol><h3 id="组件内的钩子" tabindex="-1"><a class="header-anchor" href="#组件内的钩子" aria-hidden="true">#</a> 组件内的钩⼦:</h3><ol><li>beforeRouteEnter (to, from, next)</li><li>beforeRouteUpdate (to, from, next)</li><li>beforeRouteLeave (to, from, next)</li></ol><h3 id="单独路由独享组件" tabindex="-1"><a class="header-anchor" href="#单独路由独享组件" aria-hidden="true">#</a> 单独路由独享组件:</h3><ol><li>beforeEnter: (to, from, next)</li><li>afterEach(to,from)</li><li>...</li></ol><h3 id="路由守卫有什么作用" tabindex="-1"><a class="header-anchor" href="#路由守卫有什么作用" aria-hidden="true">#</a> 路由守卫有什么作⽤：</h3><ol><li>可以在进⼊路由之前进⾏某些判断，⽐如，检查token是否存在来判断⽤户是否已经登录。</li><li>可以在路由守卫中进⾏⻚⾯的权限判断，⽐如，判断某个⽤户是否拥有该⻚⾯的权限。</li><li>也可以⽤来记录⻚⾯的某些信息，⽐如，记录⻚⾯的滚动信息等等。</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// /router/index.js</span>
<span class="token keyword">import</span> VueRouter <span class="token keyword">from</span> <span class="token string">&quot;vue-router&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">&quot;../components/Home&quot;</span>
<span class="token keyword">import</span> About <span class="token keyword">from</span> <span class="token string">&quot;../components/About&quot;</span>
<span class="token keyword">import</span> Mine <span class="token keyword">from</span> <span class="token string">&quot;../components/Mine&quot;</span>
<span class="token keyword">import</span> Login <span class="token keyword">from</span> <span class="token string">&quot;../components/Login&quot;</span>
<span class="token keyword">import</span> NotFount <span class="token keyword">from</span> <span class="token string">&quot;../components/NotFount&quot;</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueRouter<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">redirect</span><span class="token operator">:</span><span class="token string">&quot;/home&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">&quot;/home&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;home&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span>Home <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">&quot;/about&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;about&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span>About <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">&quot;/mine&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;mine&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span>Mine <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;login&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span>Login <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span>NotFount <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// hash带#    </span>
    <span class="token comment">// history不带#</span>
    <span class="token literal-property property">mode</span><span class="token operator">:</span><span class="token string">&quot;history&quot;</span><span class="token punctuation">,</span>
    routes
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 配置全局路由守卫</span>
<span class="token comment">// to表示去哪</span>
<span class="token comment">// from表示从哪里来</span>
<span class="token comment">// next表示是否放行  放行到哪里</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span>from<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">// console.log(&quot;from:&quot;,from);</span>
    <span class="token comment">// console.log(&quot;to:&quot;,to);</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>path <span class="token operator">!==</span> <span class="token string">&quot;/login&quot;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// 去的地方不是/login</span>
        <span class="token comment">// 只有登录了，才能去/home /about /mine</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>isLogin<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// 表示已登录</span>
            <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
           <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,10),e=[p];function l(c,i){return s(),a("div",null,e)}const u=n(o,[["render",l],["__file","index_08.html.vue"]]);export{u as default};
